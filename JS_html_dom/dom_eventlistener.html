<!DOCTYPE html>
<html lang="en">
<head>
<title>JS and jQuery | JS HTML DOM event listener</title>
<meta charset="utf-8">
<meta name="description" content="HTML5, js, jquery demos" />
<!-- server
<link rel="stylesheet" type="text/css" href="..stylesheets/main1.css"></link>
-->
<link rel="stylesheet" type="text/css" href="../stylesheets/main1.css"></link>
<style type="text/css">
  #bokkusu_orenji{
    background-color: orange;
  }
  #bokkusu_ao{
    background-color: lightblue;
    color: purple;
  }
  .box1{
    width: 250px;
    height: 90px;
    text-align: center;
    padding: 10px 30px;
    margin: 7px;
  }
</style>
<script src="https://code.jquery.com/jquery-2.1.1.js"></script>
<script src="https://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		
	}); //end doc ready
</script>
</head>
<body>
	<input type="button" id="submit" class="btn" value="Refreshness" onclick="location.reload();" />
	<br /><br />
  <h1>JS HTML DOM event listener</h1>

  <ul><span class="ul_tops">addEventListener() method</span>
  	<li>document.getElementById("something").addEventListener("click", functionName);</li>
  	<li>show date below</li>
  	<li>
  		<input id="button1" type="button" value="show date. click me"> &nbsp;
  		<span id="target1">Here</span>
  	</li>
  	<li>
  		<input id="button2" type="button" value="show date. mouseover"> &nbsp;
  		<span id="target2">Here</span>
  	</li>
  	<li>addEventListener() attaches an event handler to the targeted element</li>
  	<li>It also attaches an event handler to the element without overwriting existing event handlers</li>
  	<li>Go hog wild and add mulitple event handler to the same element</li>
  	<li>You may also attach the same event handler more than once</li>
  	<li>You may also attach it to any DOM object and not just HTML elements; e.g. window object</li>
  	<li>addEventListener() makes it easier to control how the event reacts to bubbling</li>
  	<li>Separation of concerns. HTML in one spot JS in another</li>
  	<li>For example if you do not have access to writing in HTML markup you can work out of a JS file</li>
  	<li>You can also undo this by removing it with removeEventListener() method</li>
  </ul>

  <ul><span class="ul_tops">examples</span>
  	<li>
  		<input id="button3" type="button" value="show date. click"> &nbsp;
  		<span id="target3">Here</span>
  	</li>
  	<li>
  		<span id="target3b">message</span>
  	</li>
  </ul>

  <ul><span class="ul_tops">syntax</span>
  	<li>element.addEventListener(event, function, useCapture);</li>
  	<li>The first parameter is the event you wish to use i.e. click, mousedown, mouseup, etc</li>
  	<li>The second parameter is the function to invoke when the event is realized</li>
  	<li>The third parameter is a boolean value specifying whether to use the event bubbling or event capturing</li>
  	<li>The third parameter is optional</li>
  	<li>Caveat: omit the "on-" prefix.  You will just use the event itself</li>
  </ul>

  <ul><span class="ul_tops">event hanlder on the spot</span>
  	<li>element.addEventListener("click", function(){ alert("Hello"); });</li>
  </ul>

  <ul><span class="ul_tops">event handler with named function</span>
  	<li>element.addEventListener("click", myFunc);</li>
  	<li>somewhere else the JS function</li>
  	<li>function myFunc(){ //code block; }</li>
  </ul>

  <ul><span class="ul_tops">Many events to the same element</span>
  	<li>element.addEventListener("click", myFunc1</li>
  	<li>element.addEventListener("mousedown", myFunc2</li>
  	<li>element.addEventListener("mouseup", myFunc3</li>
  </ul>

  <ul><span class="ul_tops">Event handler on window object</span>
  	<li>This fires when the window is resized</li>
  	<li>
  		window.addEventListener("resize", function(){
  		<br />
  		&nbsp; document.getElementById("someId").innerHTML = "You resized me";
  		<br />
	  	});
  	</li>
    <li>This gives you an alert when the window is resized</li>
    <li>
      window.addEventListener("resize", function(){
      <br />
      &nbps; alert("You resized the window");
      <br />
      });
    </li>
  </ul>

  <ul><span class="ul_tops">Passing params</span>
    <li>Use an anon function to pass a function</li>
    <li>element.addEventListener("event", function(){ yourFunc(param1, param2); });</li>
    <li>example</li>
    <li>
      <p>
        Passing parameter values using the addEventListener() method
        <br />
        Click the button to perform a calculation
      </p>
      <button id="myBtn">Try it</button>
      <br />
    <p id="demo">stuff goes here</p>
    </li>
  </ul>

  <ul><span class="ul_tops">Event bubbling and event capturing</span>
    <li>Event propagation two ways about it.</li>
    <li>Bubbling: said to "bubble up"</li>
    <li>capture: said to "trickle down"</li>
    <li>Example  p tag nested in a div tag</li>
    <li>
      Bubbling will look at the inner most element and hadle it's event first then go out
      <br />
      so the p element's click will be handled first then the div element's click
    </li>
    <li>
      Capturing is the opposite.  The outer most element's event is handled first and works inner.
    </li>
    <li>Using the addEventListener() you can specify using an argument</li>
    <li>Default value is false, and it uses event bubbling</li>
    <li>When you set value to true the event uses capturing to propogate</li>
    <li>addEventListener("event", functionName, useCapture);</li>
    <li>examples</li>
    <li>document.getElementById("thePtagId").addEventListener("click", anonFunct() {myFunction1();}, true);</li>
    <li>document.getElementById("theDivTagId").addEventListener("click", anonFunct() {myFunction2();}, true);</li>
    <li>From above if you click the p tag inside the div tag (use the function is to put up an alert) 
      <br />
      it will put up the div's alert
      <br />
      then it will put up the p tag's alert
    </li>
    <li>Think of a cone hitting the ground and collapses.  Depending on the orientation [concave vs convex] either the other part or inner part will hit the ground first</li>
  </ul>

  <ul><span class="ul_tops">illustrate difference between to types</span>
    <li>
      <div id="bokkusu_orenji" class="box1">This is a div1
        <br />
        <br />
        <span id="sp1">bubbling: nested paragraph1</span>
      </div>
    </li>
    <li>
      <div id="bokkusu_ao" class="box1">This is a div2
        <br />
        <br />
        <span id="sp2">capturing: nested paragraph2</span>
      </div>
    </li>
  </ul>

<script>
	document.getElementById("button1").addEventListener("click", showDate);
	document.getElementById("button2").addEventListener("mouseover", showDate2);
	document.getElementById("button3").addEventListener("click", showDate3);
	document.getElementById("button3").addEventListener("click", helloMundo);

	function showDate(){
		document.getElementById("target1").innerHTML = Date();
	}

	function showDate2(){
		document.getElementById("target2").innerHTML = Date();
	}

	function showDate3(){
		document.getElementById("target3").innerHTML = Date();
	}

	function helloMundo(){
		document.getElementById("target3b").innerHTML = "Hello world!";
	}

  var param1 = 23;
  var param2 = 3;
  document.getElementById("myBtn").addEventListener("click", function(){
    myFunc4(param1, param2);
  });

  function myFunc4(a,b){
    var product1 = a * b;
    document.getElementById("demo").innerHTML = product1;
  }

  //event bubbling
  document.getElementById("sp1").addEventListener("click", function(){
    alert("You clicked the nested span element");
  }, false);

  document.getElementById("bokkusu_orenji").addEventListener("click", function(){
    alert("You clicked the outer div element");
  }, false);



	$(document).ready(function(){

	}); //end doc ready
</script>
</body>
</html>